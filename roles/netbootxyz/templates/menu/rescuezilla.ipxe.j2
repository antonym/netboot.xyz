#!ipxe

# Rescuezilla Disk imaging
# https://rescuezilla.com/

:rescuezilla
set os {{ releases.rescuezilla.name }}
menu ${os} Live CD
{% for key, value in endpoints.items() | sort %}
{% if value.os == "rescuezilla" %}
item {{ item.os }}_{{ item.version }} ${space} ${os} {{ item.version }}
{% endfor %}
choose rescuezilla_version || goto rescuezilla_exit
goto ${rescuezilla_version}

{% for key, value in endpoints.items() | sort %}
{% if value.os == "rescuezilla" %}
:{{ item.os }}_{{ item.version }}
set kernel_url ${live_endpoint}{{ item.path }}
imgfree
kernel ${kernel_url}vmlinuz ip=dhcp boot=casper netboot=url url=${kernel_url}filesystem.squashfs initrd=initrd ${cmdline}
initrd ${kernel_url}initrd
boot
{% endfor %}

:rescuezilla_exit
clear menu
exit 0
